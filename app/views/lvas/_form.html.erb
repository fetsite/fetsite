
<%= semantic_form_for @lva do |f| %>
  <div class="row-fluid">
    <%= f.inputs do %>

      <div class="span9">
	<div class="row-fluid">
	  <div class="span9">
	    <div class="form-group">
	      <div class="row-fluid">
		  <%= f.input :typ, :as=>:select,  :include_blank=>false, :collection=>Lva::ERLAUBTE_TYPEN, :wrapper_html=>{:class=>'span2'}%>
		  
		<%= f.input :name, :wrapper_html=>{:class=>'span10'}%>
		</div>
		<div class="row-fluid">
		<div class="span7"%>
	      	  <div class="row-fluid">
		    <%= f.input :lvanr, :wrapper_html=>{:class=>'span4'}%>

		    <%= f.input :ects, :wrapper_html=>{:class=>'span4'} %>
		    <%= f.input :stunden, :wrapper_html=>{:class=>'span4'} %>
		  </div>
		
	      	  <div class="row-fluid">
		    <%= f.input :forumlink, :wrapper_html=>{:class=>'span12'}%>
		  </div>
		</div>
	      </div>
	    </div>
	    <div class="form-group">
	      <div class="row-fluid">
		<%= f.input :desc , :as=>:tinymce_text %>
		<%= f.input :pruefungsinformation %>
	    	<%= f.input :lernaufwand %>
	      </div>
	    </div>
	  </div>
	  
	  <div class="span3">
	    <h1> BILD </h1>
			<input id="lva" class="autocomplete-checkbox" data-checkboxdiv="lva_moduls_input" data-checkboxname="lva[modul_ids][]" data-collection="<%= (Modul.all.map{|m| "{\"value\": \""+m.id.to_s + "\", \"label\": " + "\"" +escape_javascript( m.name) +  "\"}"}.join("; "))%>"> </input>
	    <%= f.input :modul, :as => :check_boxes, :member_label=>:name, :collection => @lva.modul %>


	    <% f.input :modul, :as=>:check_boxes%>	  
	  </div>
	</div>
      </div>
      <div class="span3">
	
	<%= f.input :semester, :as=>:check_boxes, :collection=>@semester%>
	<%= f.input :lecturers, :as=>:check_boxes%>
      </div>
    <% end %>
    <%= f.actions do %>
      <%= f.action :submit, :as => :input %>
    <% end %>
<% end %>


<script>
$(function(){
 $( ".autocomplete-checkbox" ).autocomplete({
      minLength: 0,
      source: [],
      focus: function( event, ui ) {
        $( this ).val( ui.item.label );
        return false;
      },
      select: function( event, ui ) {
        $( this ).val( "" );
        $( "#"+$(this).data("checkboxdiv")).append($("<label>").append($("<div>").attr("class", "checkbox").append($("<input>").attr("type","checkbox").attr("value", ui.item.value).attr("checked","checked").attr("name",$(this).data("checkboxname"))).append(ui.item.label)));
        return false;
      }
    }).each(function() { // Goes through `.autocomplete` elements and sets source
        $(this).autocomplete("option", "source", $(this).data('collection').split(";").map(function(el){return JSON.parse(el)}));
    })
    .data( "ui-autocomplete" )._renderItem = function( ul, item ) {
      return $( "<li>" )
        .append( "<a>" + item.label +  "</a>" )
        .appendTo( ul );
    };
 	$("#tabs").tabs();
});
</script>


<%= tinymce %>



